# 実験4メモ
**方針：parser.yではmallocを行わない。変数は関数の戻り値で定義し、内部構造について考えない。メモリの開放は基本的には行わない。**

Row作るときに、名前分のメモリを確保する。
大域変数の名前とかはすべてポインタの引き回しでやった。

### symtab
- Scope列挙体にLABELを追加
  - llvmcodeでFactorをラベルとして使うため

### llvmcommands
factor_pushで新しいFactorを生成する。
(領域を確保する)

新しいFactor(retvalとか)を生成したいときは、push→popとしてポインタを受け取る。

コードを追加したいときはcode_createに、作りたい命令(LLVMcommand)とオペランドとかにとりたいFactorたちをポインタで渡す。
そうすると、コード領域を確保してくれる。
コードはコマンドと、Factorたちのポインタを持つ。

#### 関数で囲むところとか
とりあえず、メインしかないのでprintLLVMみたいなんで愚直に配置。

#### ポインタ確保部
変数とかの名前については、Rowとして定義したものを使う。
Factorは、pushされたパラメータで作成されたものを使う。
全部一度だけ確保する。

### parser.y

#### レジスタ番号管理
最初に2にする。
新しく、局所変数を確保するたびにインクリメントする。
