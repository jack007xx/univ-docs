\documentclass[a4paper,10pt]{jsarticle}

% 数式
\usepackage{amsmath,amsfonts}
\usepackage{bm}
% 画像
\usepackage[dvipdfmx]{graphicx}

\usepackage{listingsutf8,jlisting} %日本語のコメントアウトをする場合jlistingが必要
%ここからソースコードの表示に関する設定
\lstset{
  basicstyle={\ttfamily},
  identifierstyle={\small},
  commentstyle={\smallitshape},
  keywordstyle={\small\bfseries},
  ndkeywordstyle={\small},
  stringstyle={\small\ttfamily},
  frame={tb},
  breaklines=true,
  columns=[l]{fullflexible},
  numbers=left,
  xrightmargin=0zw,
  xleftmargin=3zw,
  numberstyle={\scriptsize},
  stepnumber=1,
  numbersep=1zw,
  lineskip=-0.5ex
}

\begin{document}

\title{第7回演習課題}
\author{坪井正太郎（101830245）}
\date{\today}
\maketitle
\section{}
\[S\]
\[do\ S^{(1)}\ while(E);\]
\[do\ S^{(1)}\ while(E^{(1)}\ \&\&\ D);\]
\[do\ S^{(1)}\ while(E^{(1)}\ \&\&\ D^{(1)}<C);\]
\[do\ S^{(1)}\ while(E^{(1)}\ \&\&\ D^{(1)}<x1);\]
\[do\ S^{(1)}\ while(E^{(1)}\ \&\&\ C<x1);\]
\[do\ S^{(1)}\ while(E^{(1)}\ \&\&\ x7<x1);\]
\[do\ S^{(1)}\ while(D\ \&\&\ x7<x1);\]
\[do\ S^{(1)}\ while(D^{(1)}<C\ \&\&\ x7<x1);\]
\[do\ S^{(1)}\ while(D^{(1)}<C^{(1)}-x6\ \&\&\ x7<x1);\]
\[do\ S^{(1)}\ while(D^{(1)}<C^{(1)}-x6\ \&\&\ x7<x1);\]
\[do\ S^{(1)}\ while(D^{(1)}<x1-x6\ \&\&\ x7<x1);\]
\[do\ S^{(1)}\ while(C<x1-x6\ \&\&\ x7<x1);\]
\[do\ S^{(1)}\ while(x5<x1-x6\ \&\&\ x7<x1);\]
\[do\ if\ (E)\ S^{(2)}\ else\ S^{(3)}\ while(x5<x1-x6\ \&\&\ x7<x1);\]
\[do\ if\ (E)\ S^{(2)}\ else\ x2=E;\ while(x5<x1-x6\ \&\&\ x7<x1);\]
\[do\ if\ (E)\ S^{(2)}\ else\ x2=D;\ while(x5<x1-x6\ \&\&\ x7<x1);\]
\[do\ if\ (E)\ S^{(2)}\ else\ x2=C;\ while(x5<x1-x6\ \&\&\ x7<x1);\]
\[do\ if\ (E)\ S^{(2)}\ else\ x2=C^{(1)}-x4;\ while(x5<x1-x6\ \&\&\ x7<x1);\]
\[do\ if\ (E)\ x1=E;\ else\ x2=x2-x4;\ while(x5<x1-x6\ \&\&\ x7<x1);\]
\[do\ if\ (E)\ x1=D;\ else\ x2=x2-x4;\ while(x5<x1-x6\ \&\&\ x7<x1);\]
\[do\ if\ (E)\ x1=C;\ else\ x2=x2-x4;\ while(x5<x1-x6\ \&\&\ x7<x1);\]
\[do\ if\ (E)\ x1=C^{(1)}-x3;\ else\ x2=x2-x4;\ while(x5<x1-x6\ \&\&\ x7<x1);\]
\[do\ if\ (E)\ x1=x1-x3;\ else\ x2=x2-x4;\ while(x5<x1-x6\ \&\&\ x7<x1);\]
\[do\ if\ (E)\ x1=x1-x3;\ else\ x2=x2-x4;\ while(x5<x1-x6\ \&\&\ x7<x1);\]
\[do\ if\ (D)\ x1=x1-x3;\ else\ x2=x2-x4;\ while(x5<x1-x6\ \&\&\ x7<x1);\]
\[do\ if\ (D^{(1)}<C)\ x1=x1-x3;\ else\ x2=x2-x4;\ while(x5<x1-x6\ \&\&\ x7<x1);\]
\[do\ if\ (D^{(1)}<x2)\ x1=x1-x3;\ else\ x2=x2-x4;\ while(x5<x1-x6\ \&\&\ x7<x1);\]
\[do\ if\ (C<x2)\ x1=x1-x3;\ else\ x2=x2-x4;\ while(x5<x1-x6\ \&\&\ x7<x1);\]
\[do\ if\ (x1<x2)\ x1=x1-x3;\ else\ x2=x2-x4;\ while(x5<x1-x6\ \&\&\ x7<x1);\]

\section{}
97 965 98752 98752 3 97 9865 97 964 1

\newpage
\section{}
\subsubsection*{(i)}
$S\rightarrow do$
\[\{newLabel(\&S.label);\
  generate(S.label:);\}\]
$S^{(1)}while(E);$
\[\{generate(if, E.var, goto, S.label);\}\]

\subsubsection*{(ii)}
$S\rightarrow id=E;$
\[\{generate(id.val, =, E.var);\}\]

\subsubsection*{(iii)}
$S\rightarrow if\ (E)$
\[\{newLabel(\&S.label_1);\
  generate(if\ not, E.var, goto, S.label_1);\}\]

$S^{(1)}$
\[\{newLabel(\&S.label_2);\
  generate(goto, S.label2);\
  generate(S.label_1);\}\]

$else\ S^{(2)}$
\[\{generate(S^{(2)}.var);\
  generate(S.label_2);\}\]

\subsubsection*{(iv)}
$E\rightarrow E^{(1)}\&\&D$
\[\{newTmp(\&E.var);generate(E.var, = ,E^{(1)}.var, \&\&, D.var);\}\]

\subsubsection*{(v)}
$E\rightarrow D$
\[\{newTmp(\&E.var);generate(E.var, =, D.var);\}\]

\subsubsection*{(vi)}
$D\rightarrow D^{(1)}<C$
\[\{newTmp(\&D.var);generate(D.var, =, D^{(1)}.var, <, C.var);\}\]

\subsubsection*{(vii)}
$D\rightarrow C$
\[\{newTmp(\&D.var);generate(D.var, =, C.var);\}\]

\subsubsection*{(viii)}
$C\rightarrow C^{(1)}-id$
\[\{newTmp(\&C.var);generate(C.var, =, C^{(1)}.var, -, id.val);\}\]

\subsubsection*{(ix)}
$C\rightarrow id$
\[\{newTmp(\&C.var);generate(C.var, =, id.val);\}\]

\section{}
\begin{lstlisting}[caption={出力される3番地コード},label={出力される3番地コード}]
  l1:
  t1=x1
  t2=t1
  t3=x2
  t4=t2<t3
  t5=t4
  if not t5 goto l2
  t6=x1
  t7=t6-x3
  t8=t7
  t9=t8
  x1=t9
  goto l3
  l2:
  t10=x2
  t11=t10-x4
  t12=t11
  t13=t12
  x2=t13
  l3:
  t14=x5
  t15=t14
  t16=x1
  t17=t16-x6
  t18=t15<t17
  t19=t18
  t20=x7
  t21=t20
  t22=x1
  t23=t21<t22
  t24=t19 && t23
  if t24 goto l1
\end{lstlisting}


\end{document}
